(()=>{var r={file:null,access:null,root:null,block_size:0};var o=[0,0],n=[0],u={create:!1},p={at:0};var c=(t,f,e)=>t.read(f,e);var _=(t,f,e)=>t.write(f,e);var m=t=>void(r.access=t);var d=()=>globalThis.postMessage(n);var x=t=>(r.file=t).createSyncAccessHandle();var i=(t,f,e,l,a,s,g)=>(g.at=l,a(s,t.subarray(f,e),g));var b=t=>{var f=t.currentTarget,e=t.data,l=e.type,a=e.id,s=r.access;return l===0?(o[0]=a,o[1]=i(new Uint8Array(e.buffer),e.buffer_offset,e.buffer_end,e.file_offset,c,s,p),f.postMessage(o)):l===1?(o[0]=a,o[1]=i(new Uint8Array(e.buffer),e.buffer_offset,e.buffer_end,e.file_offset,_,s,p),s.flush(),f.postMessage(o)):l===2?(o[0]=a,o[1]=i(new Uint8Array(e.buffer),e.buffer_offset,e.buffer_end,e.file_offset,_,s,p),f.postMessage(o)):l===3?(n[0]=a,r.block_size=e.block_size,u.create=e.file_create,r.root.getFileHandle(e.file_name,u).then(x).then(m).then(d)):(n[0]=a,s.flush(),s.close(),r.file=r.access=null,f.postMessage(n))};globalThis.navigator.storage.getDirectory().then(t=>(r.root=t,globalThis.onmessage=b));})();
//# sourceMappingURL=1.js.map
